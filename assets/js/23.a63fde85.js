(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{503:function(t,a,s){"use strict";s.r(a);var n=s(4),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"微信小程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序"}},[t._v("#")]),t._v(" 微信小程序")]),t._v(" "),s("blockquote",[s("p",[t._v("一直只看过文档没有实际参与过微信小程序项目，这几天写了一个DEMO练习一下")])]),t._v(" "),s("h2",{attrs:{id:"目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),s("p",[s("img",{attrs:{src:"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200617095735429.png",alt:"image-20200617095735429"}})]),t._v(" "),s("h2",{attrs:{id:"全局配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局配置"}},[t._v("#")]),t._v(" 全局配置")]),t._v(" "),s("p",[t._v("app.json进行项目的全局配置，基本格式如下")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n  "pages":[                                        ...页面路径列表\n  ],\n  "window":{                                       ...全局的默认窗口表现\n    "backgroundTextStyle": "light",\n    "navigationBarBackgroundColor": "#0068C4",\n    "navigationBarTitleText": "TodoList",\n    "navigationBarTextStyle": "white",\n    "enablePullDownRefresh": true\n  },\n  "tabBar":{                                       ...底部 tab 栏的表现\n    "color":"#636567",\n    "selectedColor":"#2A8CE5",\n    "backgroundColor":"#FBFBFB",\n    "borderStyle":"white",\n    "list":[{\n        "pagePath": "pages/index/index",\n        "iconPath": "./pages/image/列表.png",\n        "selectedIconPath":"./pages/image/列表.png",\n        "text": "待办事项"\n      }]\n  },\n  "style": "v2",\n  "networkTimeout": {                               ...网络超时时间\n    "request": 10000,\n    "downloadFile": 10000\n  },\n  "debug": true                                     ...是否开启 debug 模式\n}\n')])])]),s("p",[t._v("每个页面也可以通过  页面名.json进行页面的配置")]),t._v(" "),s("h2",{attrs:{id:"路由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),s("h3",{attrs:{id:"路由切换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由切换"}},[t._v("#")]),t._v(" 路由切换")]),t._v(" "),s("h4",{attrs:{id:"wx-redirectto"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wx-redirectto"}},[t._v("#")]),t._v(" wx.redirectTo")]),t._v(" "),s("p",[t._v("关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面。")]),t._v(" "),s("h4",{attrs:{id:"wx-navigateto"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wx-navigateto"}},[t._v("#")]),t._v(" wx.navigateTo")]),t._v(" "),s("p",[t._v("保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。使用wx.navigateBack可以返回到原页面。小程序中页面栈最多十层。")]),t._v(" "),s("h4",{attrs:{id:"wx-navigateback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wx-navigateback"}},[t._v("#")]),t._v(" wx.navigateBack")]),t._v(" "),s("p",[t._v("关闭当前页面，返回上一页面或多级页面。")]),t._v(" "),s("h3",{attrs:{id:"路由传参"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由传参"}},[t._v("#")]),t._v(" 路由传参")]),t._v(" "),s("p",[t._v("直接通过拼接的方式传值")]),t._v(" "),s("p",[t._v("如果参数为对象，先通过JSON.stringify转换为字符串")]),t._v(" "),s("p",[t._v("想要获得参数，在路由后的onLoad周期进行取值，在通过JSON.parse转换为对象")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("onLoad: function (options) {\n    var obj = JSON.parse(options.obj)\n  },\n")])])]),s("h2",{attrs:{id:"数据缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据缓存"}},[t._v("#")]),t._v(" 数据缓存")]),t._v(" "),s("p",[t._v("因为没有后端数据库，想进行一些数据交互只能在缓存中进行")]),t._v(" "),s("p",[t._v("微信小程序对于缓存的操作分为异步和同步，在使用过程中我比较喜欢get用同步，set都用异步")]),t._v(" "),s("ul",[s("li",[t._v("wx.setStorageSync")]),t._v(" "),s("li",[t._v("wx.setStorage")]),t._v(" "),s("li",[t._v("wx.removeStorageSync")]),t._v(" "),s("li",[t._v("wx.removeStorage")]),t._v(" "),s("li",[t._v("wx.getStorageSync")]),t._v(" "),s("li",[t._v("wx.getStorageInfoSync")]),t._v(" "),s("li",[t._v("wx.getStorageInfo")]),t._v(" "),s("li",[t._v("wx.getStorage")]),t._v(" "),s("li",[t._v("wx.clearStorageSync")]),t._v(" "),s("li",[t._v("wx.clearStorage")])]),t._v(" "),s("h2",{attrs:{id:"获取用户信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取用户信息"}},[t._v("#")]),t._v(" 获取用户信息")]),t._v(" "),s("p",[t._v("通过调用"),s("code",[t._v("getUserinfo()")]),t._v("进行用户信息调取")]),t._v(" "),s("p",[t._v("现在需要通过"),s("code",[t._v("<button open-type=\"getUserInfo\" bindgetuserinfo='getUser'>登录</button>")]),t._v("来进行授权处理")]),t._v(" "),s("p",[t._v("res里面的"),s("code",[t._v("userInfo")]),t._v("可以得到微信名、微信头像、地区等")]),t._v(" "),s("h3",{attrs:{id:"登录（老版本有点问题）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登录（老版本有点问题）"}},[t._v("#")]),t._v(" 登录（老版本有点问题）")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 登录")]),t._v("\n    wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送 res.code 到后台换取 openId, sessionKey, unionId")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取用户信息")]),t._v("\n    wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSetting")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("authSetting"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'scope.userInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框")]),t._v("\n          wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以将 res 发送给后台解码出 unionId")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo\n              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 由于 getUserInfo 是网络请求，可能会在 Page.onLoad 之后才返回")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所以此处加入 callback 以防止这种情况")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfoReadyCallback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("userInfoReadyCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"事件处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件处理"}},[t._v("#")]),t._v(" 事件处理")]),t._v(" "),s("h3",{attrs:{id:"bindtag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bindtag"}},[t._v("#")]),t._v(" bindtag")]),t._v(" "),s("p",[t._v("点击事件，如果需要传值可以通过"),s("code",[t._v("data-")]),t._v("这个字段进行传值")]),t._v(" "),s("p",[t._v("在函数中通过"),s("code",[t._v("e.currentTarget.dataset")]),t._v("获取参数")]),t._v(" "),s("p",[t._v("也可以通过"),s("code",[t._v("catchtag")]),t._v("捕捉时间并且阻止冒泡、")]),t._v(" "),s("h2",{attrs:{id:"双向绑定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#双向绑定"}},[t._v("#")]),t._v(" 双向绑定")]),t._v(" "),s("p",[t._v("简易双向绑定机制。可以在对应项目之前加入 "),s("code",[t._v("model:")]),t._v(" 前缀")]),t._v(" "),s("p",[t._v("只能是一个单一字段的绑定，目前，尚不能 data 路径")]),t._v(" "),s("h2",{attrs:{id:"组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),s("p",[t._v("中间可以使用"),s("code",[t._v("<solt></solt>")]),t._v("，留一个位置在父页面使用时嵌套在组件标签中")]),t._v(" "),s("p",[t._v("父子组件传值。像vue一样就是"),s("code",[t._v("props")]),t._v("改为"),s("code",[t._v("properties")])]),t._v(" "),s("p",[t._v("在使用时要在父组件的json文件中声明")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("因为今天只实现了todolist的基本功能，只是一些基础的配置，以后项目中遇到更难的会继续记录")])])}),[],!1,null,null,null);a.default=e.exports}}]);